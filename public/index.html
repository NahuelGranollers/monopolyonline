<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<title>Monopoly Poblenou - Modo Oscuro</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root{
    --bg:#0a0e27;
    --panel:#1a1f3a;
    --accent:#00d4ff;
    --muted:#8892b0;
    --tile-size:78px;
    --success:#00ff88;
    --error:#ff4757;
    --warning:#ffa502;
    --tile-bg:#15182b;
    --tile-border:#2a3050;
    --text:#e6f1ff;
  }
  
  html,body{
    height:100%;
    margin:0;
    font-family:'Segoe UI',Arial,sans-serif;
    background:var(--bg);
    color:var(--text);
  }
  
  #app{
    display:flex;
    height:100vh;
    gap:12px;
    padding:12px;
    box-sizing:border-box;
  }
  
  .left{
    width:420px;
    display:flex;
    flex-direction:column;
    gap:12px;
  }
  
  .boardWrap{
    flex:1;
    background:linear-gradient(135deg, #0f1424 0%, #1a1f3a 100%);
    border-radius:12px;
    padding:14px;
    display:flex;
    align-items:center;
    justify-content:center;
    position:relative;
    box-shadow:inset 0 0 50px rgba(0, 212, 255, 0.1);
  }
  
  .sidebar{
    background:var(--panel);
    box-shadow:0 8px 24px rgba(0,0,0,.5), 0 0 20px rgba(0,212,255,0.1);
    border-radius:10px;
    border:1px solid rgba(0,212,255,0.2);
    padding:12px;
    overflow:auto;
  }
  
  h2{
    margin:6px 0 10px 0;
    font-size:16px;
    font-weight:600;
    color:var(--accent);
    text-shadow:0 0 10px rgba(0,212,255,0.5);
  }
  
  .controls{
    display:flex;
    gap:8px;
    margin-bottom:8px;
  }
  
  .controls input{
    flex:1;
    padding:9px;
    border:1px solid var(--tile-border);
    border-radius:8px;
    font-size:14px;
    background:var(--tile-bg);
    color:var(--text);
    transition:all .3s;
  }
  
  .controls input:focus{
    outline:none;
    border-color:var(--accent);
    box-shadow:0 0 10px rgba(0,212,255,0.3);
  }
  
  .controls input::placeholder{
    color:#555;
  }
  
  .controls button{
    padding:9px 16px;
    border-radius:8px;
    border:none;
    background:var(--accent);
    color:#000;
    cursor:pointer;
    font-weight:600;
    transition:all .3s;
    box-shadow:0 0 15px rgba(0,212,255,0.3);
  }
  
  .controls button:hover{
    background:#00ffea;
    transform:translateY(-2px);
    box-shadow:0 0 25px rgba(0,212,255,0.6);
  }
  
  .controls button:disabled{
    background:#2a3050;
    color:#555;
    cursor:not-allowed;
    transform:none;
    box-shadow:none;
  }
  
  .playersList{
    display:flex;
    flex-direction:column;
    gap:8px;
  }
  
  .playerCard{
    display:flex;
    align-items:center;
    gap:10px;
    padding:8px;
    border-radius:8px;
    border:1px solid var(--tile-border);
    background:var(--tile-bg);
    transition:all .3s;
  }
  
  .playerCard:hover{
    border-color:var(--accent);
    box-shadow:0 0 15px rgba(0,212,255,0.2);
  }
  
  .playerCard.active{
    box-shadow:0 0 0 2px var(--accent);
    background:rgba(0,212,255,0.1);
  }
  
  .playerCard.disconnected{
    opacity:.5;
    border-color:var(--error);
  }
  
  .token{
    width:32px;
    height:32px;
    border-radius:8px;
    background:#666;
    color:#fff;
    display:flex;
    align-items:center;
    justify-content:center;
    font-weight:700;
    font-size:14px;
    box-shadow:0 0 10px rgba(0,212,255,0.3);
  }
  
  .btnRow{
    display:flex;
    gap:8px;
    flex-wrap:wrap;
    margin-bottom:8px;
  }
  
  button.action{
    padding:10px 14px;
    background:linear-gradient(135deg, #00d4ff 0%, #0099cc 100%);
    color:#000;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:600;
    transition:all .3s;
    font-size:13px;
    box-shadow:0 4px 15px rgba(0,212,255,0.3);
  }
  
  button.action:hover:not(:disabled){
    transform:translateY(-2px);
    box-shadow:0 6px 20px rgba(0,212,255,0.5);
  }
  
  button.action:disabled{
    background:#2a3050;
    color:#555;
    cursor:not-allowed;
    transform:none;
    box-shadow:none;
  }
  
  button.action.danger{
    background:linear-gradient(135deg, #ff4757 0%, #d32f2f 100%);
    color:#fff;
  }
  
  button.action.danger:hover:not(:disabled){
    background:linear-gradient(135deg, #ff6b7a 0%, #e53935 100%);
  }
  
  .log{
    background:var(--tile-bg);
    border:1px solid var(--tile-border);
    padding:8px;
    height:140px;
    overflow:auto;
    border-radius:6px;
    font-size:13px;
    line-height:1.5;
  }
  
  .log div{
    padding:2px 0;
    border-bottom:1px solid var(--tile-border);
    color:var(--muted);
  }
  
  .log div:last-child{
    border:none;
  }
  
  .board{
    width:calc(var(--tile-size) * 11 + 20px);
    height:calc(var(--tile-size) * 11 + 20px);
    position:relative;
    border-radius:10px;
    perspective:800px;
    background:radial-gradient(circle at center, rgba(0,212,255,0.05), transparent);
  }
  
  .boardInner{
    width:100%;
    height:100%;
    position:relative;
  }
  
  .tile{
    width:var(--tile-size);
    height:var(--tile-size);
    background:var(--tile-bg);
    border:2px solid var(--tile-border);
    border-radius:8px;
    position:absolute;
    display:flex;
    flex-direction:column;
    justify-content:space-between;
    padding:6px;
    box-sizing:border-box;
    font-size:12px;
    box-shadow:0 4px 12px rgba(0,0,0,.5), 0 0 10px rgba(0,212,255,0.1);
    transition:all .3s;
  }
  
  .tile:hover{
    transform:translateY(-3px);
    box-shadow:0 6px 20px rgba(0,0,0,.7), 0 0 20px rgba(0,212,255,0.3);
    border-color:var(--accent);
  }
  
  .tile .title{
    font-size:11px;
    font-weight:800;
    line-height:1.2;
    color:var(--text);
    text-shadow:0 0 5px rgba(0,212,255,0.3);
  }
  
  .colorBar{
    height:14px;
    border-radius:4px;
    margin-top:4px;
    box-shadow:0 0 10px currentColor;
  }
  
  .playersMarkers{
    display:flex;
    gap:4px;
    margin-top:6px;
    flex-wrap:wrap;
  }
  
  .tokenSmall{
    width:16px;
    height:16px;
    border-radius:50%;
    box-shadow:0 2px 6px rgba(0,0,0,.5), 0 0 8px currentColor;
    animation:pulse .5s ease-in-out;
  }
  
  @keyframes pulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.15)}
  }
  
  .ownerBadge{
    position:absolute;
    right:6px;
    bottom:6px;
    width:14px;
    height:14px;
    border-radius:3px;
    box-shadow:0 0 8px currentColor;
  }
  
  .modal-simple{
    position:fixed;
    inset:0;
    display:flex;
    align-items:center;
    justify-content:center;
    background:rgba(0,0,0,0.9);
    z-index:99999;
    animation:fadeIn .3s;
    backdrop-filter:blur(10px);
  }
  
  @keyframes fadeIn{
    from{opacity:0}
    to{opacity:1}
  }
  
  .diceBox{
    display:flex;
    gap:28px;
    align-items:center;
    justify-content:center;
    flex-direction:row;
  }
  
  .dieSimple{
    width:180px;
    height:180px;
    border-radius:16px;
    background:linear-gradient(135deg, #1a1f3a 0%, #0f1424 100%);
    border:3px solid var(--accent);
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:96px;
    font-weight:900;
    color:var(--accent);
    box-shadow:0 18px 48px rgba(0,0,0,.8), 0 0 30px rgba(0,212,255,0.5);
    transition:transform .15s ease;
    text-shadow:0 0 20px rgba(0,212,255,0.8);
  }
  
  .diePulse{
    animation:dicePulse .3s ease-in-out;
  }
  
  @keyframes dicePulse{
    0%,100%{transform:scale(1)}
    50%{transform:scale(1.1) rotate(5deg)}
  }
  
  .caption{
    color:var(--accent);
    margin-top:20px;
    font-weight:700;
    font-size:20px;
    text-shadow:0 0 15px rgba(0,212,255,0.8);
  }
  
  .alert{
    padding:10px;
    border-radius:6px;
    margin-bottom:10px;
    font-size:13px;
    font-weight:600;
    animation:slideIn .3s;
    border:1px solid;
  }
  
  @keyframes slideIn{
    from{transform:translateY(-10px);opacity:0}
    to{transform:translateY(0);opacity:1}
  }
  
  .alert.success{
    background:rgba(0,255,136,0.1);
    color:var(--success);
    border-color:var(--success);
    box-shadow:0 0 15px rgba(0,255,136,0.2);
  }
  
  .alert.error{
    background:rgba(255,71,87,0.1);
    color:var(--error);
    border-color:var(--error);
    box-shadow:0 0 15px rgba(255,71,87,0.2);
  }
  
  .alert.info{
    background:rgba(0,212,255,0.1);
    color:var(--accent);
    border-color:var(--accent);
    box-shadow:0 0 15px rgba(0,212,255,0.2);
  }
  
  .status-indicator{
    display:inline-block;
    width:8px;
    height:8px;
    border-radius:50%;
    margin-right:6px;
    box-shadow:0 0 8px currentColor;
  }
  
  .status-indicator.online{
    background:var(--success);
  }
  
  .status-indicator.offline{
    background:var(--error);
  }
  
  .roomId{
    background:var(--tile-bg);
    padding:4px 8px;
    border-radius:4px;
    font-family:monospace;
    font-size:12px;
    display:inline-block;
    margin-top:6px;
    border:1px solid var(--accent);
    color:var(--accent);
    box-shadow:0 0 10px rgba(0,212,255,0.2);
  }
  
  #status{
    color:var(--muted);
    font-size:13px;
    padding:8px;
    background:var(--tile-bg);
    border-radius:6px;
    border:1px solid var(--tile-border);
  }
  
  #copyRoomBtn{
    margin-left:8px;
    padding:4px 8px;
    font-size:11px;
    background:var(--success);
    color:#000;
    border:none;
    border-radius:4px;
    cursor:pointer;
    transition:all .3s;
    box-shadow:0 0 10px rgba(0,255,136,0.3);
  }
  
  #copyRoomBtn:hover{
    background:#00ff9d;
    box-shadow:0 0 15px rgba(0,255,136,0.5);
  }
  
  @media (max-width:900px){
    #app{flex-direction:column;height:auto}
    .left{width:100%;order:2}
    .boardWrap{width:100%;height:450px;order:1}
    .board{transform:scale(0.65)}
    .dieSimple{width:120px;height:120px;font-size:64px}
    .diceBox{gap:16px}
  }
</style>
</head>
<body>
<div id="app">
  <div class="left">
    <div class="sidebar">
      <h2>🎲 Monopoly Poblenou</h2>
      <div id="alerts"></div>
      
      <div class="controls">
        <input id="name" placeholder="Tu nombre" maxlength="20">
        <button id="joinBtn">Unirse</button>
      </div>
      <div class="controls">
        <input id="room" placeholder="ID de sala" maxlength="20">
        <button id="createBtn">Crear Sala</button>
        <button id="startBtn" disabled>Comenzar</button>
      </div>

      <div>
        <p id="status"></p>
      </div>

      <div id="roomInfo" style="display:none">
        <span class="status-indicator online"></span>
        <strong>Sala:</strong> <span class="roomId" id="roomIdDisplay"></span>
        <button id="copyRoomBtn">📋 Copiar</button>
      </div>

      <h2>👥 Jugadores (<span id="playerCount">0</span>)</h2>
      <div class="playersList" id="playersList"></div>

      <h2>🎮 Acciones</h2>
      <div class="btnRow">
        <button class="action" id="rollBtn" disabled>🎲 Tirar dados</button>
        <button class="action" id="endBtn" disabled>⏭️ Finalizar turno</button>
        <button class="action" id="buyBtn" disabled>💰 Comprar</button>
        <button class="action" id="buildBtn" disabled>🏠 Construir</button>
        <button class="action" id="mortBtn" disabled>🏦 Hipotecar</button>
      </div>

      <h2>📊 Estado</h2>
      <div style="background:var(--tile-bg);padding:10px;border-radius:6px;border:1px solid var(--tile-border)">
        <div><strong>Turno:</strong> <span id="turnInfo">-</span></div>
        <div style="margin-top:6px"><strong>Últimos dados:</strong> <span id="diceSmall">-</span></div>
        <div style="margin-top:6px"><strong>Tu dinero:</strong> <span id="moneyInfo" style="color:var(--success);font-weight:700">$0</span></div>
      </div>

      <h2>📜 Registro</h2>
      <div class="log" id="log"></div>
    </div>
  </div>

  <div class="boardWrap">
    <div class="board" id="board">
      <div class="boardInner" id="boardInner"></div>
    </div>
  </div>
</div>

<div id="modalRoot"></div>

<script src="/socket.io/socket.io.js"></script>
<script src="client.js"></script>
</body>
</html>
